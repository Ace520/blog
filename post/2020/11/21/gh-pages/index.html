<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>将文件发布到gh-pages | ACE-BLOG</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="alternate" type="application/rss+xml" href="https://ace520.github.io/blog/rss.xml" title="ACE-BLOG RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://ace520.github.io/blog/feed.atom" title="ACE-BLOG Atom Feed">
    <link rel="alternate" type="application/json" href="https://ace520.github.io/blog/feed.json" title="ACE-BLOG JSON Feed">
    <meta name="description" content="Ace blog">
    
    <link rel="preload" href="/blog/assets/css/0.styles.26addc36.css" as="style"><link rel="preload" href="/blog/assets/js/app.9f3153ed.js" as="script"><link rel="preload" href="/blog/assets/js/6.ecdf3155.js" as="script"><link rel="preload" href="/blog/assets/js/49.65e03ce4.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.0003b697.js"><link rel="prefetch" href="/blog/assets/js/11.b68de6bf.js"><link rel="prefetch" href="/blog/assets/js/12.77d6d820.js"><link rel="prefetch" href="/blog/assets/js/13.f33487bd.js"><link rel="prefetch" href="/blog/assets/js/14.8822d172.js"><link rel="prefetch" href="/blog/assets/js/15.c819179f.js"><link rel="prefetch" href="/blog/assets/js/16.79543088.js"><link rel="prefetch" href="/blog/assets/js/17.766b3941.js"><link rel="prefetch" href="/blog/assets/js/18.81c62ea6.js"><link rel="prefetch" href="/blog/assets/js/19.8364a997.js"><link rel="prefetch" href="/blog/assets/js/20.f2f213c7.js"><link rel="prefetch" href="/blog/assets/js/21.f90aff7b.js"><link rel="prefetch" href="/blog/assets/js/22.6aab7c86.js"><link rel="prefetch" href="/blog/assets/js/23.28bae060.js"><link rel="prefetch" href="/blog/assets/js/24.cbbbbc4d.js"><link rel="prefetch" href="/blog/assets/js/25.310a3567.js"><link rel="prefetch" href="/blog/assets/js/26.9ab44bb1.js"><link rel="prefetch" href="/blog/assets/js/27.b912915a.js"><link rel="prefetch" href="/blog/assets/js/28.85cd8e7b.js"><link rel="prefetch" href="/blog/assets/js/29.faa4b826.js"><link rel="prefetch" href="/blog/assets/js/3.4cbc4191.js"><link rel="prefetch" href="/blog/assets/js/30.8c2e317b.js"><link rel="prefetch" href="/blog/assets/js/31.d2d7bf70.js"><link rel="prefetch" href="/blog/assets/js/32.989414b4.js"><link rel="prefetch" href="/blog/assets/js/33.b968e5c9.js"><link rel="prefetch" href="/blog/assets/js/34.3d9bab93.js"><link rel="prefetch" href="/blog/assets/js/35.2bd7dfbd.js"><link rel="prefetch" href="/blog/assets/js/36.0745817c.js"><link rel="prefetch" href="/blog/assets/js/37.df7b8ade.js"><link rel="prefetch" href="/blog/assets/js/38.5fb3c824.js"><link rel="prefetch" href="/blog/assets/js/39.7b38e3df.js"><link rel="prefetch" href="/blog/assets/js/4.b37f8596.js"><link rel="prefetch" href="/blog/assets/js/40.18d0cf6d.js"><link rel="prefetch" href="/blog/assets/js/41.be06a52e.js"><link rel="prefetch" href="/blog/assets/js/42.014a00fa.js"><link rel="prefetch" href="/blog/assets/js/43.6613794d.js"><link rel="prefetch" href="/blog/assets/js/44.b13ba885.js"><link rel="prefetch" href="/blog/assets/js/45.c8b47dca.js"><link rel="prefetch" href="/blog/assets/js/46.a305b5c0.js"><link rel="prefetch" href="/blog/assets/js/47.499cde66.js"><link rel="prefetch" href="/blog/assets/js/48.cc9b98ad.js"><link rel="prefetch" href="/blog/assets/js/5.d7caac5b.js"><link rel="prefetch" href="/blog/assets/js/50.a2bb8233.js"><link rel="prefetch" href="/blog/assets/js/51.f252a1b7.js"><link rel="prefetch" href="/blog/assets/js/7.ab1c0caa.js"><link rel="prefetch" href="/blog/assets/js/8.23f4e3b4.js"><link rel="prefetch" href="/blog/assets/js/9.252f2c8a.js"><link rel="prefetch" href="/blog/assets/js/vuejs-paginate.c4271a33.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.26addc36.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout" class="flex flex-col" data-v-5d13d588><div class="header flex-none bg-cover bg-center" data-v-5d13d588><div class="container mx-auto h-16 flex items-center justify-between" data-v-5d13d588><div class="flex items-center" data-v-5d13d588><a href="/blog/" class="nav-logo router-link-active" data-v-5d13d588>Blog</a> <div class="search-box" data-v-5d13d588><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div data-v-5d13d588><a href="/blog/post" class="nav-link router-link-active nav-link-active" data-v-5d13d588>博客文章</a><a href="/blog/lab" class="nav-link" data-v-5d13d588>实验室</a><a href="/blog/link" class="nav-link" data-v-5d13d588>友情链接</a><a href="/blog/guestbook/" class="nav-link" data-v-5d13d588>留言板</a></div></div></div> <div class="flex-1 m-t--8" data-v-5d13d588><div class="container mx-auto content" data-v-5d13d588><div class="grid grid-cols-11 gap-4" data-v-5d13d588><div class="card col-span-11 sm:col-span-11 md:col-span-11 lg:col-span-11 xl:col-span-9"><div class="p-4 border-b"><div class="mb-3 mt-1 text-lg font-bold">将文件发布到gh-pages</div> <div class="flex items-center text-sm text-gray-600"><div class="mr-2">
          2020-11-21
        </div> <div class="mr-2">
          vue
        </div> <div class="flex items-center"><div class="tag-1 truncate">
            github
          </div></div></div></div> <div class="p-4 markdown-body"><div class="content__default"><h1 id="gh-pages">gh-pages</h1> <p>Publish files to a <code>gh-pages</code> branch on GitHub (or any other branch anywhere else).</p> <h2 id="getting-started">Getting Started</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> gh-pages --save-dev
</code></pre></div><p>This module requires Git <code>&gt;=1.9</code>.</p> <h2 id="basic-usage">Basic Usage</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ghpages <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gh-pages'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="publish"><code>publish</code></h2> <div class="language-js extra-class"><pre class="language-js"><code>ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or...</span>
ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> options<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Calling this function will create a temporary clone of the current repository, create a <code>gh-pages</code> branch if one doesn't already exist, copy over all files from the base path, or only those that match patterns from the optional <code>src</code> configuration, commit all changes, and push to the <code>origin</code> remote.</p> <p>If a <code>gh-pages</code> branch already exists, it will be updated with all commits from the remote before adding any commits from the provided <code>src</code> files.</p> <p><strong>Note</strong> that any files in the <code>gh-pages</code> branch that are <em>not</em> in the <code>src</code> files <strong>will be removed</strong>.  See the <a href="#optionsadd"><code>add</code> option</a> if you don't want any of the existing files removed.</p> <h3 id="dir"><a id="dir"><code>dir</code></a></h3> <ul><li>type: <code>string</code></li></ul> <p>The base directory for all source files (those listed in the <code>src</code> config property).</p> <p>Example use:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * Given the following directory structure:
 *
 *   dist/
 *     index.html
 *     js/
 *       site.js
 *
 * The usage below will create a `gh-pages` branch that looks like this:
 *
 *   index.html
 *   js/
 *     site.js
 *
 */</span>
ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="options">Options</h3> <p>The default options work for simple cases.  The options described below let you push to alternate branches, customize your commit messages, and more.</p> <h4 id="options-src"><a id="optionssrc">options.src</a></h4> <ul><li>type: <code>string|Array&lt;string&gt;</code></li> <li>default: <code>'**/*'</code></li></ul> <p>The <a href="https://github.com/isaacs/minimatch" target="_blank" rel="noopener noreferrer">minimatch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> pattern or array of patterns used to select which files should be published.</p> <h4 id="options-branch"><a id="optionsbranch">options.branch</a></h4> <ul><li>type: <code>string</code></li> <li>default: <code>'gh-pages'</code></li> <li><code>-b | --branch &lt;branch name&gt;</code></li></ul> <p>The name of the branch you'll be pushing to.  The default uses GitHub's <code>gh-pages</code> branch, but this can be configured to push to any branch on any remote.</p> <p>Example use of the <code>branch</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * This task pushes to the `master` branch of the configured `repo`.
 */</span>
ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  branch<span class="token operator">:</span> <span class="token string">'master'</span><span class="token punctuation">,</span>
  repo<span class="token operator">:</span> <span class="token string">'https://example.com/other/repo.git'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="options-dest"><a id="optionsdest">options.dest</a></h4> <ul><li>type: <code>string</code></li> <li>default: <code>'.'</code></li></ul> <p>The destination folder within the destination branch.  By default, all files are published to the root of the repository.</p> <p>Example use of the <code>dest</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * Place content in the static/project subdirectory of the target
 * branch.
 */</span>
ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  dest<span class="token operator">:</span> <span class="token string">'static/project'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="options-dotfiles"><a id="optionsdotfiles">options.dotfiles</a></h4> <ul><li>type: <code>boolean</code></li> <li>default: <code>false</code></li></ul> <p>Include dotfiles.  By default, files starting with <code>.</code> are ignored unless they are explicitly provided in the <code>src</code> array.  If you want to also include dotfiles that otherwise match your <code>src</code> patterns, set <code>dotfiles: true</code> in your options.</p> <p>Example use of the <code>dotfiles</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * The usage below will push dotfiles (directories and files)
 * that otherwise match the `src` pattern.
 */</span>
ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>dotfiles<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="options-add"><a id="optionsadd">options.add</a></h4> <ul><li>type: <code>boolean</code></li> <li>default: <code>false</code></li></ul> <p>Only add, and never remove existing files.  By default, existing files in the target branch are removed before adding the ones from your <code>src</code> config.  If you want the task to add new <code>src</code> files but leave existing ones untouched, set <code>add: true</code> in your options.</p> <p>Example use of the <code>add</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * The usage below will only add files to the `gh-pages` branch, never removing
 * any existing files (even if they don't exist in the `src` config).
 */</span>
ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>add<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="options-repo"><a id="optionsrepo">options.repo</a></h4> <ul><li>type: <code>string</code></li> <li>default: url for the origin remote of the current dir (assumes a git repository)</li> <li><code>-r | --repo &lt;repo url&gt;</code></li></ul> <p>By default, <code>gh-pages</code> assumes that the current working directory is a git repository, and that you want to push changes to the <code>origin</code> remote.</p> <p>If instead your script is not in a git repository, or if you want to push to another repository, you can provide the repository URL in the <code>repo</code> option.</p> <p>Example use of the <code>repo</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * If the current directory is not a clone of the repository you want to work
 * with, set the URL for the repository in the `repo` option.  This usage will
 * push all files in the `src` config to the `gh-pages` branch of the `repo`.
 */</span>
ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  repo<span class="token operator">:</span> <span class="token string">'https://example.com/other/repo.git'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="options-remote"><a id="optionsremote">options.remote</a></h4> <ul><li>type: <code>string</code></li> <li>default: <code>'origin'</code></li></ul> <p>The name of the remote you'll be pushing to.  The default is your <code>'origin'</code> remote, but this can be configured to push to any remote.</p> <p>Example use of the <code>remote</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * This task pushes to the `gh-pages` branch of of your `upstream` remote.
 */</span>
ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  remote<span class="token operator">:</span> <span class="token string">'upstream'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="options-tag"><a id="optionstag">options.tag</a></h4> <ul><li>type: <code>string</code></li> <li>default: <code>''</code></li></ul> <p>Create a tag after committing changes on the target branch.  By default, no tag is created.  To create a tag, provide the tag name as the option value.</p> <h4 id="options-message"><a id="optionsmessage">options.message</a></h4> <ul><li>type: <code>string</code></li> <li>default: <code>'Updates'</code></li></ul> <p>The commit message for all commits.</p> <p>Example use of the <code>message</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * This adds commits with a custom message.
 */</span>
ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  message<span class="token operator">:</span> <span class="token string">'Auto-generated commit'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="options-user"><a id="optionsuser">options.user</a></h4> <ul><li>type: <code>Object</code></li> <li>default: <code>null</code></li></ul> <p>If you are running the <code>gh-pages</code> task in a repository without a <code>user.name</code> or <code>user.email</code> git config properties (or on a machine without these global config properties), you must provide user info before git allows you to commit.  The <code>options.user</code> object accepts <code>name</code> and <code>email</code> string values to identify the committer.</p> <p>Example use of the <code>user</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code>ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  user<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Joe Code'</span><span class="token punctuation">,</span>
    email<span class="token operator">:</span> <span class="token string">'coder@example.com'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="options-remove"><a id="optionsuser">options.remove</a></h4> <ul><li>type: <code>string</code></li> <li>default: <code>'.'</code></li></ul> <p>Removes files that match the given pattern (Ignored if used together with
<code>--add</code>). By default, <code>gh-pages</code> removes everything inside the target branch
auto-generated directory before copying the new files from <code>dir</code>.</p> <p>Example use of the <code>remove</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code>ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  remove<span class="token operator">:</span> <span class="token string">&quot;*.json&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="options-push"><a id="optionspush">options.push</a></h4> <ul><li>type: <code>boolean</code></li> <li>default: <code>true</code></li></ul> <p>Push branch to remote.  To commit only (with no push) set to <code>false</code>.</p> <p>Example use of the <code>push</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code>ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>push<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="options-history"><a id="optionshistory">options.history</a></h4> <ul><li>type: <code>boolean</code></li> <li>default: <code>true</code></li></ul> <p>Push force new commit without parent history.</p> <p>Example use of the <code>history</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code>ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>history<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="options-silent"><a id="optionssilent">options.silent</a></h4> <ul><li>type: <code>boolean</code></li> <li>default: <code>false</code></li></ul> <p>Avoid showing repository URLs or other information in errors.</p> <p>Example use of the <code>silent</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * This configuration will avoid logging the GH_TOKEN if there is an error.
 */</span>
ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  repo<span class="token operator">:</span> <span class="token string">'https://'</span> <span class="token operator">+</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">GH_TOKEN</span> <span class="token operator">+</span> <span class="token string">'@github.com/user/private-repo.git'</span><span class="token punctuation">,</span>
  silent<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="options-beforeadd"><a id="optionsbeforeadd">options.beforeAdd</a></h4> <ul><li>type: <code>function</code></li> <li>default: <code>null</code></li></ul> <p>Custom callback that is executed right before <code>git add</code>.</p> <p>The CLI expects a file exporting the beforeAdd function</p> <div class="language-bash extra-class"><pre class="language-bash"><code>gh-pages --before-add ./cleanup.js
</code></pre></div><p>Example use of the <code>beforeAdd</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * beforeAdd makes most sense when `add` option is active
 * Assuming we want to keep everything on the gh-pages branch
 * but remove just `some-outdated-file.txt`
 */</span>
ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  add<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">beforeAdd</span><span class="token punctuation">(</span><span class="token parameter">git</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> git<span class="token punctuation">.</span><span class="token function">rm</span><span class="token punctuation">(</span><span class="token string">'./some-outdated-file.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="options-git"><a id="optionsgit">options.git</a></h4> <ul><li>type: <code>string</code></li> <li>default: <code>'git'</code></li></ul> <p>Your <code>git</code> executable.</p> <p>Example use of the <code>git</code> option:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * If `git` is not on your path, provide the path as shown below.
 */</span>
ghpages<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'dist'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  git<span class="token operator">:</span> <span class="token string">'/path/to/git'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="command-line-utility">Command Line Utility</h2> <p>Installing the package creates a <code>gh-pages</code> command line utility.  Run <code>gh-pages --help</code> to see a list of supported options.</p> <p>With a local install of <code>gh-pages</code>, you can set up a package script with something like the following:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token string">&quot;scripts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;deploy&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;gh-pages -d dist&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>And then to publish everything from your <code>dist</code> folder to your <code>gh-pages</code> branch, you'd run this:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> run deploy
</code></pre></div><h2 id="debugging">Debugging</h2> <p>To get additional output from the <code>gh-pages</code> script, set <code>NODE_DEBUG=gh-pages</code>.  For example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">NODE_DEBUG</span><span class="token operator">=</span>gh-pages <span class="token function">npm</span> run deploy
</code></pre></div><h2 id="dependencies">Dependencies</h2> <p>Note that this plugin requires Git 1.9 or higher (because it uses the <code>--exit-code</code> option for <code>git ls-remote</code>).  If you'd like to see this working with earlier versions of Git, please <a href="https://github.com/tschaub/gh-pages/issues" target="_blank" rel="noopener noreferrer">open an issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p><img src="https://github.com/tschaub/gh-pages/workflows/Test/badge.svg" alt="Test Status"></p> <h2 id="tips">Tips</h2> <h3 id="when-get-error-branch-already-exists">when get error <code>branch already exists</code></h3> <div class="language- extra-class"><pre class="language-text"><code>{ ProcessError: fatal: A branch named 'gh-pages' already exists.

    at ChildProcess.&lt;anonymous&gt; (~/node_modules/gh-pages/lib/git.js:42:16)
    at ChildProcess.emit (events.js:180:13)
    at maybeClose (internal/child_process.js:936:16)
    at Process.ChildProcess._handle.onexit (internal/child_process.js:220:5)
  code: 128,
  message: 'fatal: A branch named \'gh-pages\' already exists.\n',
  name: 'ProcessError' }
</code></pre></div><p>The <code>gh-pages</code> module writes temporary files to a <code>node_modules/.cache/gh-pages</code> directory.  The location of this directory can be customized by setting the <code>CACHE_DIR</code> environemnt variable.</p> <p>If <code>gh-pages</code> fails, you may find that you need to manually clean up the cache directory.  To remove the cache directory, run <code>node_modules/gh-pages/bin/gh-pages-clean</code> or remove <code>node_modules/.cache/gh-pages</code>.</p></div></div> <div><!----></div></div> <div class="card col-span-2 sm:hidden md:hidden lg:hidden xl:block"><div style="height: 100vh; position: sticky; top: 0"><div class="px-2 truncate level-2"><a href="#getting-started" class="sidebar-link">
          Getting Started
        </a></div><div class="px-2 truncate level-2"><a href="#basic-usage" class="sidebar-link">
          Basic Usage
        </a></div><div class="px-2 truncate level-2"><a href="#publish" class="sidebar-link">
          publish
        </a></div><div class="px-2 truncate level-3"><a href="#dir" class="sidebar-link">
          
        </a></div><div class="px-2 truncate level-3"><a href="#options" class="sidebar-link">
          Options
        </a></div><div class="px-2 truncate level-2"><a href="#command-line-utility" class="sidebar-link">
          Command Line Utility
        </a></div><div class="px-2 truncate level-2"><a href="#debugging" class="sidebar-link">
          Debugging
        </a></div><div class="px-2 truncate level-2"><a href="#dependencies" class="sidebar-link">
          Dependencies
        </a></div><div class="px-2 truncate level-2"><a href="#tips" class="sidebar-link">
          Tips
        </a></div><div class="px-2 truncate level-3"><a href="#when-get-error-branch-already-exists" class="sidebar-link">
          when get error branch already exists
        </a></div></div></div></div></div></div> <div class="flex-none footer mt-16" data-v-5d13d588><div class="container mx-auto flex items-center justify-center h-full" data-v-5d13d588><a href="https://github.com/ulivz/70-lines-of-vuepress-blog-theme" data-v-5d13d588>Github</a> · Powered by VuePress<p data-v-5d13d588></p></div></div></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.9f3153ed.js" defer></script><script src="/blog/assets/js/6.ecdf3155.js" defer></script><script src="/blog/assets/js/49.65e03ce4.js" defer></script>
  </body>
</html>
